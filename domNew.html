<!DOCTYPE html>
<html>

<head>
    <title>Проект "Комменты"</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="container">
        <ul class="comments" id="comment-list">
            <!-- <li class="comment">
                <div class="comment-header">
                    <div>Глеб Фокин</div>
                    <div class="comment-date">12.02.22 12:18</div>
                </div>
                <div class="comment-body">
                    <div class="comment-text">
                        Это будет первый комментарий на этой странице
                    </div>
                </div>
                <div class="comment-footer">
                    <div class="likes">
                        <span class="likes-counter">3</span>
                        <button class="like-button"></button>
                    </div>
                </div>
            </li>
            <li class="comment">
                <div class="comment-header">
                    <div>Варвара Н.</div>
                    <div>13.02.22 19:22</div>
                </div>
                <div class="comment-body">
                    <div class="comment-text">
                        Мне нравится как оформлена эта страница! ❤️
                    </div>
                </div>
                <div class="comment-footer">
                    <div class="likes">
                        <span class="likes-counter">75</span>
                        <button class="like-button active-like"></button>
                    </div>
                </div>
            </li> -->
        </ul>
        <div class="add-form">
            <input type="text" class="add-form-name" placeholder="Введите ваше имя" id="name-input" />
            <textarea type="textarea" class="add-form-text" placeholder="Введите ваш коментарий" rows="4"
                id="comment-input"></textarea>
            <div class="add-form-row">
                <button class="add-form-button" id="add-comment-button">Написать</button>
            </div>
        </div>
    </div>
    <script>
        const commentList = document.getElementById("comment-list");
        const nameInput = document.getElementById("name-input");
        const commentInput = document.getElementById("comment-input");
        const addCommentButton = document.getElementById("add-comment-button");

        //массив с комментами
        const comments = [
            {
                name: 'Глеб Фокин',
                dateCreation: '12.02.22 12:18',
                textComment: 'Это будет первый комментарий на этой странице',
                likeComment: false,
                likeNumber: 3,
            },
            {
                name: 'Варвара Н.',
                dateCreation: '13.02.22 19:22',
                textComment: 'Мне нравится как оформлена эта страница! ❤️',
                likeComment: false,
                likeNumber: 75,
            },
        ];
            // форма добавления из массива
        const renderComments = () => {
            const commentsHTML = comments.map((comment) => {
                ` <div class="comment-header">
        <div>${name}</div>
        <div class="comment-date">${dateCreation}</div>
    </div>
    <div class="comment-body">
        <div class="comment-text">${textComment}</div>
    </div>
    <div class="comment-footer">
        <div class="likes">
            <span class="likes-counter">$likeNumber</span>
            <button class="like-button"></button>
        </div>
    </div>  `
            }).join('');
            commentList.innerHTML = commentsHTML;
        };
        //если не ввели имя,то выдать ошибку
        addCommentButton.addEventListener("click", () => {
            nameInput.classList.remove("error");
            commentInput.classList.remove("error");

            const name = nameInput.value.trim();
            const comment = commentInput.value.trim();

            if (name === "") {
                nameInput.classList.add("error");
                return;
            }

            if (comment === "") {
                commentInput.classList.add("error");
                return;
            }

            const now = new Date();
            const options = {
                year: "numeric",
                month: "numeric",
                day: "numeric",
                hour: "numeric",
                minute: "numeric"
            };

            const formatter = new Intl.DateTimeFormat("ru", options);
            const date = formatter.format(now);
            //форма добавления новго коммента
            const newComment = document.createElement("li");
            newComment.classList.add("comment");
                        newComment.innerHTML = `
                <div class="comment-header">
                    <div>${name}</div>
                    <div class="comment-date">${date}</div>
                </div>
                <div class="comment-body">
                    <div class="comment-text">${comment}</div>
                </div>
                <div class="comment-footer">
                    <div class="likes">
                        <span class="likes-counter">0</span>
                        <button class="like-button"></button>
                    </div>
                </div>
              `;
            commentList.appendChild(newComment);

            nameInput.value = "";
            commentInput.value = "";

            const likeButton = newComment.querySelector(".like-button");
            const likesCounter = newComment.querySelector(".likes-counter");
                // кликабельность лайка
            likeButton.addEventListener("click", () => {
                if (likeButton.classList.contains("liked")) {
                    likeButton.classList.remove("liked");
                    likesCounter.textContent = parseInt(likesCounter.textContent) - 1;
                } else {
                    likeButton.classList.add("liked");
                    likesCounter.textContent = parseInt(likesCounter.textContent) + 1;
                }
            });
        });
    </script>
</body>

</html>